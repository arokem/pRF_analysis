<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="popeye : A population receptive field estimation tool">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>popeye</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/kdesimone/popeye">View on GitHub</a>

          <h1 id="project_title">popeye</h1>
          <h2 id="project_tagline">A population receptive field estimation tool</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/kdesimone/popeye/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/kdesimone/popeye/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h3>

<a name="welcome" class="anchor" href="#welcome"><span class="octicon octicon-link"></span></a>What is a population receptive field?</h3>

<p>A population receptive field (pRF) is a quantitative model of the cumulative response of the population of cells contained within a single fMRI voxel.  The pRF model allows us to interpret and predict the responses of a voxel to different stimuli.  The pRF model can be designed to describe a wide variety of sensory and cognitive processes.</p>

<h3><a name="welcome" class="anchor" href="#welcome"><span class="octicon octicon-link"></span></a>Installation</h3>

<p>Download the popeye source code from the GitHub repository.  Links to the tarball and zip files are at the top of this page for your convenience.  Using popeye requires that you have installed <a href="http://www.numpy.org/">NumPy</a>, <a href="http://www.scipy.org/">SciPy</a>, and <a href="http://www.cython.org/">Cython</a>.  Installing <a href="http://www.matplotlib.org/">matplotlib</a> is recommended as we'll be plotting the results of our pRF estimation but is not required for any of the model fitting procedures in popeye.</p>

<p>Once you've download the popeye source code and installed the aforementioned dependencies, you'll need to install popeye and build the Cython extensions I've written for speeding up the analyses.</p> 

<pre><code><font size="2">
$ cd popeye
$ sudo python setup.py install build_ext
$ python
>>> import popeye
>>> popeye.__version__
'0.1.0.dev'
</font></code></pre><p></p>

<h3><a name="welcome" class="anchor" href="#welcome"><span class="octicon octicon-link"></span></a>Getting started</h3>

<p>Below is a small demonstration of how to interact with the popeye API.  Here, we'll generate our stimulus and simulate the BOLD response of a Gaussian pRF model estimate we'll just invent.  Normally, we'd be analyzing the BOLD time-series that we collect while we present a participant with a visual stimulus.</p>

<pre><code><font size="2">
import popeye.utilities as utils
import popeye.gaussian as gaussian
from popeye.visual_stimulus import VisualStimulus, simulate_bar_stimulus
from popeye.spinach import MakeFastGaussPrediction
from scipy.signal import fftconvolve

# set the screen properties
pixels_across = 800 # pixels
pixels_down = 600 # pixels
viewing_distance = 38 # cm
screen_width = 25 # cm

# set the bar stimulus properties
thetas = np.arange(0,360,45) # degrees
eccentricity- = 10 # degrees
num_steps = 20 # integer

# set the timing and scale properties
tr_length = 1.0 # seconds
frames_per_tr = 1.0 # integer
scale_factor = 0.05 # scaling factor between 0 and 1

# create the sweeping bar stimulus in memory
bar = simulate_bar_stimulus(pixels_across, pixels_down, viewing_distance,
                            screen_width, thetas, num_steps, eccentricity)

# create an instance of the Stimulus class
stimulus = VisualStimulus(bar, viewing_distance, screen_width, 
                          scale_factor, frames_per_tr)

# set up bounds for the grid search
search_bounds = ((-10,10),(-10,10),(0.25,5.25),(-5,5),(0.1,1e2))
fit_bounds = ((-12,12),(-12,12),(1/stimulus.ppd,12),(-5,5),(0.1,1e2))

# initialize the gaussian model
model = gaussian.GaussianModel(stimulus)

# generate a random pRF estimate
x = -5.24 # degrees
y = 2.583 # degrees
sigma = 1.24 # degrees
hrf_delay = -0.25 # seconds relative to canonical HRF (5 sec)
beta = 2.53 # amplitude

# make the stim time-series
stim = MakeFastGaussPrediction(stimulus.deg_x, stimulus.deg_y, 
                               stimulus.stim_arr, 
                               x, y, sigma)

# create the HRF
hrf = utils.double_gamma_hrf(hrf_delay, tr_length, frames_per_tr)

# simulate the BOLD response
data = fftconvolve(stim,hrf)[0:len(stim)] * beta

# fit the response
fit = gaussian.GaussianFit(data, model, search_bounds, fit_bounds, tr_length)

</font></code></pre>

<p>If you're using the GitHub for Mac, simply sync your repository and you'll see the new branch.</p>

<h3><a name="designer-templates" class="anchor" href="#designer-templates"><span class="octicon octicon-link"></span></a>Designer Templates</h3>

<p>We've crafted some handsome templates for you to use. Go ahead and continue to layouts to browse through them. You can easily go back to edit your page before publishing. After publishing your page, you can revisit the page generator and switch to another theme. Your Page content will be preserved if it remained markdown format.</p>

<h3>
<a name="rather-drive-stick" class="anchor" href="#rather-drive-stick"><span class="octicon octicon-link"></span></a>Rather Drive Stick?</h3>

<p>If you prefer to not use the automatic generator, push a branch named <code>gh-pages</code> to your repository to create a page manually. In addition to supporting regular HTML content, GitHub Pages support Jekyll, a simple, blog aware static site generator written by our own Tom Preston-Werner. Jekyll makes it easy to create site-wide headers and footers without having to copy them across every page. It also offers intelligent blog support and other advanced templating features.</p>

<h3>
<a name="authors-and-contributors" class="anchor" href="#authors-and-contributors"><span class="octicon octicon-link"></span></a>Authors and Contributors</h3>

<p>You can <a href="https://github.com/blog/821" class="user-mention">@mention</a> a GitHub username to generate a link to their profile. The resulting <code>&lt;a&gt;</code> element will link to the contributor's GitHub Profile. For example: In 2007, Chris Wanstrath (<a href="https://github.com/defunkt" class="user-mention">@defunkt</a>), PJ Hyett (<a href="https://github.com/pjhyett" class="user-mention">@pjhyett</a>), and Tom Preston-Werner (<a href="https://github.com/mojombo" class="user-mention">@mojombo</a>) founded GitHub.</p>

<h3>
<a name="support-or-contact" class="anchor" href="#support-or-contact"><span class="octicon octicon-link"></span></a>Support or Contact</h3>

<p>Having trouble with Pages? Check out the documentation at <a href="http://help.github.com/pages">http://help.github.com/pages</a> or contact <a href="mailto:support@github.com">support@github.com</a> and weâ€™ll help you sort it out.</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">popeye maintained by <a href="https://github.com/kdesimone">kdesimone</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
